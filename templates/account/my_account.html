{% extends '_base.html' %}
{% load crispy_forms_tags %}

{% block title %}My Account{% endblock %}

{% block main %}
<div class="card border-primary m-auto mb-3" style="max-width: 30rem">
  <div class="card-header text-center">My Account</div>
  <div class="card-body">

    <form method="post" enctype="multipart/form-data" class="m-auto" novalidate>
    {% if user.avatar and not form.avatar.errors %}
      <img src="{{ user.avatar.url }}" alt="Avatar"
           class="img-thumbnail mx-auto d-block mb-3" style="max-width: 200px;">
    {% endif %}
      {% csrf_token %}
      {{ form.non_field_errors }}
      {{ form|crispy }}

      {% if request.user.avatar %}
        <p>Current avatar:</p>
        <img src="{{ request.user.avatar.url }}" alt="Avatar"
             style="max-width:240px;max-height:240px;border-radius:8px;">
      {% endif %}

      <button type="submit" class="btn btn-primary mt-2">Save</button>
    </form>
  </div>
  <div class="card-footer text-center">
    <p><a href="{% url 'password_change' %}">Change Password</a></p>
  </div>
</div>
{% endblock %}
